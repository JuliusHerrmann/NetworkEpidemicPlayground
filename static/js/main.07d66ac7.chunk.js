(this["webpackJsonpvisualization-app"]=this["webpackJsonpvisualization-app"]||[]).push([[0],{14:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},46:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a,i,r,o,s,c,u,l,h,d=n(1),p=n.n(d),f=n(7),b=n.n(f),j=(n(25),n(26),n(2)),m=n(5),g=n(6),v=n(4),O=n(3),S=n(20),y=[];function x(e){var t=1e7,n=null,i=null,r=null;for(var s in c){var u=e[s=c[s]];for(var l in a)if(!((l=a[l])[0]instanceof Array)&&u===l[0]){var h=k(l[2]);h<t&&(t=h,n=l,i=s,r=null)}}for(var d in o){var p=(d=o[d])[0],f=d[1],b=e[p],j=e[f];for(var m in a)if("string"!=typeof(m=a[m])[0]&&(b===m[0][0]&&j===m[0][1]||j===m[0][0]&&b===m[0][1])){var g=k(m[2]);g<t&&(t=g,n=m,i=null,r=d)}}if(null==n)return[null,t];var v=Array.from(e);if(null!=i)return v[i]=n[1],[v,t];console.assert(null!=r);var O=r[0],S=r[1];return v[O]===n[0][0]&&v[S]===n[0][1]?(v[O]=n[1][0],v[S]=n[1][1]):(v[O]=n[1][1],v[S]=n[1][0]),[v,t]}function C(e){w.push(u[0]);for(var t=[],n=0;n<i.length;n++)t.push(0);for(var a in y.push(e),e){a=e[a],t[i.indexOf(a)]+=1}for(var r=I[0].values.length,o=0;o<i.length;o++)I[o].values.push([r,t[o]])}function k(e){return 0===e?1e7:-Math.log(Math.random())/e}var D=[],I={},w=[];var N=function(e,t,n,d,p){for(var f in y=[],a=e,i=t,r=n,s=p,c=function(e){var t=[];for(var n in e)n=e[n],t.push(n[0]),t.push(n[1]);t=t.sort((function(e,t){return e-t}));for(var a=[],i=-1,r=0;r<t.length;r++)i!==t[r]&&(a.push(t[r]),i=t[r]);return a}(o=d),u=function(e,t,n){console.assert(e<t),console.assert(n>0);for(var a=(t-e)/(n-1),i=e,r=[];i<=t;)r.push(Math.round(100*i)/100),i+=a;return r}(0,s,101),l=function(e,t,n){for(var a=[],i=n.reduce((function(e,t){return e+t})),r=0;r<t;r++){var o=Math.random()*i;a.push(e.find((function(e,t){return(o-=n[t])<0})))}return a}(i,c.length,r),h=0,D=[],I=[],i)f=i[f],I.push({key:f,values:[]});for(;u.length>0;){var b=x(l),j=Object(S.a)(b,2),m=j[0],g=j[1];for(h+=g;u.length>0&&h>u[0];)D.push(Array.from(l)),C(l),u=u.slice(1,u.length);l=m}return{data:y,stateCounts:I,timeSteps:w}},M=n(10);var G=function(e){var t=[],n=[];for(var a in e)a=e[a],t.push(a[0]),t.push(a[1]),n.push({data:{source:a[0],target:a[1]}});t=t.sort((function(e,t){return e>t}));for(var i=[],r=-1,o=0;o<t.length;o++)r!==t[o]&&(i.push({data:{id:t[o],label:""}}),r=t[o]);return t=i,[].concat(Object(M.a)(t),n)},z=(n(27),n(28),n(0)),E=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(z.jsxs)("div",{className:"SliderDiv",children:[Object(z.jsx)("label",{htmlFor:"Slider",className:"SliderDescription",children:this.props.description}),Object(z.jsx)("input",{className:"Slider",type:"range",min:this.props.min,max:this.props.max,value:this.props.currentValue,onChange:this.props.handleChange,step:this.props.step}),Object(z.jsx)("input",{type:"number",htmlFor:"Slider",className:"SliderValue",value:this.props.currentValue,onChange:this.props.handleChange})]})}}]),n}(p.a.Component),F=E,L=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(z.jsxs)("div",{id:"HorizonSelector",children:[Object(z.jsx)("h2",{id:"HorizonSelectorName",className:"selectorName",children:"Select the simulation horizon"}),Object(z.jsx)(F,{description:"Select Horizon",handleChange:this.props.handleChange,currentValue:this.props.currentValue,min:"1",max:"200"})]})}}]),n}(p.a.Component),V=L,R=(n(30),function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).changeVal=a.changeVal.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"createOption",value:function(e,t){return Object(z.jsx)("option",{value:e.name,children:e.name},t)}},{key:"changeVal",value:function(e){var t=this.props.options[e.target.selectedIndex];this.props.handleChange(t)}},{key:"render",value:function(){return Object(z.jsxs)("div",{className:"DropdownDiv",children:[Object(z.jsx)("label",{htmlFor:"Dropdown",className:"DropdownDescription",children:this.props.description}),Object(z.jsx)("select",{className:"Dropdown",name:this.props.name,onChange:this.changeVal,children:this.props.options.map(this.createOption)})]})}}]),n}(p.a.Component)),A=(n(31),function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(e,a){var i;return Object(j.a)(this,n),(i=t.call(this)).optionName=e,i.graph=a,i}return Object(m.a)(n,[{key:"name",get:function(){return this.optionName}},{key:"getGraph",value:function(){return this.graph}},{key:"componentDidMount",value:function(){this.props.updateGraphObject(this)}}]),n}(p.a.Component)),P=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.call(this,"Karate",[[1,0],[2,0],[2,1],[3,0],[3,1],[3,2],[4,0],[5,0],[6,0],[6,4],[6,5],[7,0],[7,1],[7,2],[7,3],[8,0],[8,2],[9,2],[10,0],[10,4],[10,5],[11,0],[12,0],[12,3],[13,0],[13,1],[13,2],[13,3],[16,5],[16,6],[17,0],[17,1],[19,0],[19,1],[21,0],[21,1],[25,23],[25,24],[27,2],[27,23],[27,24],[28,2],[29,23],[29,26],[30,1],[30,8],[31,0],[31,24],[31,25],[31,28],[32,2],[32,8],[32,14],[32,15],[32,18],[32,20],[32,22],[32,23],[32,29],[32,30],[32,31],[33,8],[33,9],[33,13],[33,14],[33,15],[33,18],[33,19],[33,20],[33,22],[33,23],[33,26],[33,27],[33,28],[33,29],[33,30],[33,31],[33,32]])}return Object(m.a)(n,[{key:"render",value:function(){return Object(z.jsx)("h3",{id:"karateExplanation",children:'This is the so called "Zachary Karate Club Network". It models a university karate club.'})}}]),n}(A),T=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this,"2D-Grid",[])).changeDimension=function(t){var n=t.target.value;n<1||n>100||(e.setState({dimension:Number(n)}),e.props.updateGraphObject(Object(g.a)(e)))},e.state={dimension:3},e}return Object(m.a)(n,[{key:"calculateGraph",value:function(){this.graph=[];for(var e=0;e<this.state.dimension*this.state.dimension;e++)(e+1)%this.state.dimension!==0&&this.graph.push([e,e+1]),e<this.state.dimension*this.state.dimension-this.state.dimension&&this.graph.push([e,e+this.state.dimension]);return this.graph}},{key:"getGraph",value:function(){return this.calculateGraph()}},{key:"render",value:function(){return Object(z.jsxs)("div",{id:"dimensionSlider",children:[" ",Object(z.jsx)(F,{description:"Select a dimension",handleChange:this.changeDimension,min:"2",max:"12",currentValue:this.state.dimension})]})}}]),n}(A),B=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this,"Custom",[[1,1],[2,1],[3,1],[4,1]])).textFieldChanged=function(t){var n=t.target.value;e.setState({input:n})},e.state={input:""},e}return Object(m.a)(n,[{key:"getGraph",value:function(){return this.parseInput(this.state.input)}},{key:"parseInput",value:function(e){var t=/[([]{1}\s*([0-9]*)\s*,\s*[0-9]+\s*[)\]]{1}/g,n=e.match(t),a=[];return e=(e=(e=e.replaceAll(" ","")).replaceAll("\t","")).replaceAll("\n",""),t=/[0-9]+/g,null==n?[]:(n.forEach((function(e){var n=e.match(t);n[0]=Number(n[0]),n[1]=Number(n[1]),a.push(n)})),a)}},{key:"render",value:function(){return Object(z.jsxs)("div",{children:[Object(z.jsxs)("h3",{className:"CustomHeader",children:["Enter an edgelist like: ",Object(z.jsx)("code",{children:"(0, 1), (0, 2), (1,2)"})]}),Object(z.jsx)("textarea",{className:"CustomInput",type:"text",onChange:this.textFieldChanged,value:this.state.input,required:!0,pattern:"[([]{1}\\s*([0-9]*)\\s*,\\s*[0-9]+\\s*[)\\]]{1}",placeholder:"(0, 1), (0, 2), (1,2)"})]})}}]),n}(A),H=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).Karate=new P,a.Grid=new T,a.custom=new B,a.state={predefinedNetworks:[a.Karate,a.Grid,a.custom],currentValue:"Karate"},a.dropdownChanged=a.dropdownChanged.bind(Object(g.a)(a)),a.updateGraphObject=a.updateGraphObject.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"dropdownChanged",value:function(e){this.setState({currentValue:e.name}),this.props.handleChange(e)}},{key:"updateGraphObject",value:function(e){this.props.handleChange(e)}},{key:"renderCustomHtml",value:function(){switch(this.state.currentValue){case"Karate":return Object(z.jsx)(P,{updateGraphObject:this.updateGraphObject});case"2D-Grid":return Object(z.jsx)(T,{updateGraphObject:this.updateGraphObject});case"Custom":return Object(z.jsx)(B,{updateGraphObject:this.updateGraphObject})}}},{key:"render",value:function(){return Object(z.jsxs)("div",{id:"ContactSelector",children:[Object(z.jsx)("h2",{id:"ContactSelectorName",className:"selectorName",children:"Contact Network"}),Object(z.jsx)(R,{name:"Select Network",description:"Select a network",options:this.state.predefinedNetworks,handleChange:this.dropdownChanged}),this.renderCustomHtml()]})}}]),n}(p.a.Component),K=(n(32),function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(e,a,i,r,o){var s;return Object(j.a)(this,n),(s=t.call(this)).changeProbability=function(e,t){s.setState({}),s.rules[e][2]=Number(t.target.value),s.props.updateSelectedModel(Object(g.a)(s))},s.normalizeDistribution=function(){var e=s.calculateSumOfDistributions();0!==e&&(s.states=s.states.map((function(t){return t[1]=Number((t[1]/e).toPrecision(2)),t})),s.valid=!0,s.setState({}))},s.changeDistribution=function(e,t){s.setState({}),s.states[e][1]=Number(t.target.value),s.props.updateSelectedModel(Object(g.a)(s))},s.changeColor=function(e,t){s.setState({}),s.states[e][2]=t.target.value,s.props.updateSelectedModel(Object(g.a)(s))},s.optionName=e,s.states=a,s.rules=i,s.ruleMax=r,s.ruleStep=o,s.valid=!0,s.checkValidity(),s}return Object(m.a)(n,[{key:"name",get:function(){return this.optionName}},{key:"getRules",value:function(){return this.rules}},{key:"getStates",value:function(){var e=[];return this.states.forEach((function(t){e.push(t[0])})),e}},{key:"getColors",value:function(){var e=[];return this.states.forEach((function(t){e.push([t[0],t[2]])})),e}},{key:"getDistribution",value:function(){var e=[];return this.states.forEach((function(t){e.push(t[1])})),e}},{key:"componentDidMount",value:function(){this.props.updateSelectedModel(this)}},{key:"checkValidity",value:function(){var e=this.calculateSumOfDistributions();this.valid=!(e<.99||e>1.01)}},{key:"calculateSumOfDistributions",value:function(){var e=0;return this.getDistribution().forEach((function(t){e+=t})),e}},{key:"buildDesc",value:function(e){return(e[0]+"->"+e[1]).replaceAll(",","+")}},{key:"buildSliders",value:function(e,t){var n=this,a=[],i=0;return this.getRules().forEach((function(r){var o=i;a.push(Object(z.jsx)(F,{description:n.buildDesc(r),handleChange:function(e){return n.changeProbability(o,e)},min:"0",max:e,currentValue:r[2],step:t},o)),i++})),a}},{key:"buildSlidersDistribution",value:function(){var e=this,t=[],n=0;return this.states.forEach((function(a){var i=a[0];i.length>10&&(i=i.substring(0,11)+"...");var r=n;t.push(Object(z.jsxs)("div",{children:[Object(z.jsx)("input",{type:"color",className:"ColorPicker",value:e.states[r][2],onChange:function(t){return e.changeColor(r,t)}},-r-1),Object(z.jsx)(F,{description:i,handleChange:function(t){return e.changeDistribution(r,t)},min:"0",max:"1",currentValue:a[1],step:"0.001"},r)]},r*-r-100)),n++})),t}},{key:"render",value:function(){return Object(z.jsxs)("div",{className:"modelSelector",children:[Object(z.jsx)("h3",{id:"selectRulesHeader",children:"Transition Rates"}),this.buildSliders(this.ruleMax,this.ruleStep),Object(z.jsx)("h3",{id:"selectDistributionHeader",children:"Initial Distribution"}),this.buildSlidersDistribution()]})}}]),n}(p.a.Component)),U=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.call(this,"SI-Model",[["S",.9,"#0FA75F"],["I",.1,"#ff225b"]],[[["S","I"],["I","I"],.5]],20,.05)}return n}(K),q=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.call(this,"SEIRS-Model",[["E",.03,"#1F85DE"],["I",.03,"#de1f50"],["R",.03,"#b91fde"],["S",.91,"#1fdea7"]],[[["S","I"],["I","E"],.5],["E","I",.5],["I","R",.5],["R","S",.5]],20,.05)}return n}(K),_=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.call(this,"Corona-Model",[["S",.83,"#1F85DE"],["E",.1,"#010061"],["I1",.005,"#de1f50"],["I2",.005,"#b91fde"],["I3",.005,"#1fdea7"],["R",.005,"#8fde1f"],["V",.005,"#de801f"],["D",.005,"#3b0b0b"]],[[["I1","S"],["I2","E"],.15],[["I2","S"],["I2","E"],.05],[["I3","S"],["I3","E"],.05],["E","I1",.2],["I1","I2",.03],["I2","I3",.04],["I3","D",.25],["I1","R",.13],["I2","R",.13],["I3","R",.12]],1,.01)}return n}(K),J=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this,"Custom",[["S",.97,"#1F85DE"],["I",.03,"#de1f50"]],[["S","I",.5]],20,.05)).textFieldChanged=function(t){var n=t.target.value;e.setState({input:n});var a=e.parseInput(t.target.value);null!=a&&(e.rules=a.rules,e.states=a.states,console.log(e.rules,e.states))},e.state={input:""},e.defaultColors=["#0fa75f","#ff225b","#03aaf9","#fffb00","#cc0080"],e}return Object(m.a)(n,[{key:"parseInput",value:function(e){var t=this,n=(e=(e=(e=e.replaceAll(" ","")).replaceAll("\t","")).replaceAll("\n","")).match(/[[(]"?[\w\d]+"?,"?[\w\d]+"?,([0-9]*[.])?[0-9]+[)\]][\s\t]*|[([][([]("?[\w\d]+"?,)+"?[\w\d]+"?[\])],[([]("?[\w\d]+"?,)+"?[\w\d]+"?[\])],([0-9]*[.])?[0-9]+[\])][\s\t]*/g);if(null==n)return null;var a=[],i=[];if(n.forEach((function(e){if(3===(e=e.split(",")).length)i.push(t.parseValidRule(e,a));else{if(e.length%2===0)return;if(!e[(e.length-1)/2].includes("("))return;i.push(t.parseValidRule(e,a))}})),0===i.length)return null;var r=-1;return a=a.map((function(e){return++r<5?[e,1/a.length,t.defaultColors[r]]:[e,1/a.length,"#ffffff"]})),{rules:i,states:a}}},{key:"parseValidRule",value:function(e,t){var n=e.slice(0,e.length-1),a=/[\w\d]+/g;n=n.map((function(e){return e.match(a)[0]})),a=/([0-9]*[.])?[0-9]+/g;var i=e[e.length-1].match(a);return n.forEach((function(e){t.includes(e)||t.push(e)})),2===n.length?[].concat(Object(M.a)(n),[Number(i)]):[n.slice(0,n.length/2),n.slice(n.length/2,n.length),Number(i)]}},{key:"render",value:function(){return Object(z.jsxs)("div",{children:[Object(z.jsxs)("h3",{children:["Enter the rules like: ",Object(z.jsx)("code",{children:'("S","I",0.1), (("I","S"),("I","I"),0.3)'})]}),Object(z.jsx)("textarea",{className:"CustomInput CustomModel",type:"text",onChange:this.textFieldChanged,value:this.state.input,required:!0,pattern:"[[(]'?[\\w\\d]+'?,'?[\\w\\d]+'?,([0-9]*[.])?[0-9]+[)\\]][\\s\\t]*|[([][([]('?[\\w\\d]+'?,)+'?[\\w\\d]+'?[\\])],[([]('?[\\w\\d]+'?,)+'?[\\w\\d]+'?[\\])],([0-9]*[.])?[0-9]+[\\])][\\s\\t]*",placeholder:'("S","I",0.1), (("I","S"),("I","I"),0.3)'}),Object(z.jsx)("h3",{id:"selectDistributionHeader",children:"Initial Distribution"}),this.buildSlidersDistribution()]})}}]),n}(K),W=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).SIModel=new U,a.SEIRSModel=new q,a.CoronaModel=new _,a.custom=new J,a.state={predefinedModels:[a.SIModel,a.SEIRSModel,a.CoronaModel,a.custom],currentValue:"SI-Model"},a.dropdownChanged=a.dropdownChanged.bind(Object(g.a)(a)),a.updateSelectedModel=a.updateSelectedModel.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"dropdownChanged",value:function(e){this.setState({currentValue:e.name}),this.props.handleChange(e)}},{key:"updateSelectedModel",value:function(e){this.props.handleChange(e)}},{key:"renderCustomHtml",value:function(){switch(this.state.currentValue){case"SI-Model":return Object(z.jsx)(U,{updateSelectedModel:this.updateSelectedModel});case"SEIRS-Model":return Object(z.jsx)(q,{updateSelectedModel:this.updateSelectedModel});case"Corona-Model":return Object(z.jsx)(_,{updateSelectedModel:this.updateSelectedModel});case"Custom":return Object(z.jsx)(J,{updateSelectedModel:this.updateSelectedModel})}}},{key:"render",value:function(){return Object(z.jsxs)("div",{id:"ModelSelector",children:[Object(z.jsx)("h2",{id:"ModelSelectorName",className:"selectorName",children:"Spreading Model"}),Object(z.jsx)(R,{name:"Select Model",description:"Select a network",options:this.state.predefinedModels,handleChange:this.dropdownChanged}),this.renderCustomHtml()]})}}]),n}(p.a.Component),Z=n(16),Q=n.n(Z),X=(n(34),n(35),function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).calculateChartData=function(){for(var t=function(t){e.props.stateCounts[t].color=e.props.colors.find((function(n){return n[0]===e.props.stateCounts[t].key}))[1],e.props.stateCounts[t].values=e.props.stateCounts[t].values.slice(0,e.props.animationLength+1)},n=0;n<e.props.stateCounts.length;n++)t(n);return e.props.stateCounts},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(z.jsx)("div",{id:"chart",children:Object(z.jsx)(Q.a,{type:"stackedAreaChart",xAxis:{tickFormat:function(t){return e.props.timeSteps[t]}},datum:this.calculateChartData,x:function(e){return e[0]},y:function(e){return e[1]}})})}}]),n}(p.a.Component)),Y=X,$=n(17),ee=n.n($),te=n(18),ne=(n(14),n(46),n(19)),ae=n.n(ne),ie=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).generateGIF=function(){e.state.rendering||(!Math.abs(Number(e.state.duration))>0?console.log("Only numbers are allowed in duration!"):(e.setState({rendering:!0}),e.setState({duration:Number(Math.abs(e.state.duration))},(function(){var t=new ae.a({workers:2,quality:10,repeat:e.state.loop?0:-1,background:e.state.background});t.on("finished",function(e){this.setState({rendering:!1});var t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="simulationGIF",document.body.append(t),t.click(),t.remove(),setTimeout((function(){return URL.revokeObjectURL(t.href)}),7e3)}.bind(Object(g.a)(e))),clearInterval(e.animationId),e.props.setState({step:0},(function(){e.animationId=setInterval(e.grabImageAndNextStep.bind(null,t,1e3*e.state.duration/e.props.animationLength),1),e.props.setState({playing:!0})}))}))))},e.grabImageAndNextStep=function(t,n){if(e.state.step>e.props.animationLength)return clearInterval(e.animationId),e.visualizeStep(e.state.step),t.addFrame(document.querySelectorAll("canvas")[2],{copy:!0,delay:n}),e.props.setState({playing:!1,step:0}),e.props.visualizeSpecificStep({target:{value:0}}),void t.render();e.visualizeStep(e.state.step),t.addFrame(document.querySelectorAll("canvas")[2],{copy:!0,delay:n}),e.setState({step:e.state.step+1})},e.visualizeStep=function(t){e.props.visualizeSpecificStep({target:{value:t}})},e.getButtonText=function(){return e.state.rendering?"Please Wait ...":"Generate GIF \ud83d\udcf8"},e.state={step:0,duration:5,loop:!0,background:"#ffffff",rendering:!1},e.animationId=0,e}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(z.jsxs)("div",{id:"generateGIFPopup",children:[Object(z.jsx)("div",{className:"popupHeader",children:"GIF Generator"}),Object(z.jsxs)("div",{className:"popupSection",children:[Object(z.jsx)("label",{htmlFor:"gifDuration",id:"gifLengthLabel",children:"Duration In Seconds: "}),Object(z.jsx)("input",{htmlFor:"gifDuration",type:"number",id:"gifLengthInput",value:this.state.duration,onChange:function(t){return e.setState({duration:t.target.value})}})]}),Object(z.jsxs)("div",{className:"popupSection",children:[Object(z.jsx)("label",{htmlFor:"gifBackground",id:"gifBackgroundLabel",children:"Background Color: "}),Object(z.jsx)("input",{htmlFor:"gifBackground",id:"gifBackgroundInput",type:"color",value:this.state.background,onChange:function(t){return e.setState({background:t.target.value})}})]}),Object(z.jsxs)("div",{className:"popupSection",children:[Object(z.jsx)("label",{htmlFor:"gifLoop",id:"gifLoopLabel",children:"Loop: "}),Object(z.jsx)("input",{htmlFor:"gifLoop",id:"gifLoopInput",type:"checkbox",checked:this.state.loop,onChange:function(t){return e.setState({loop:t.target.checked})}})]}),Object(z.jsx)("button",{className:"popupButton",onClick:this.generateGIF,children:this.getButtonText()})]})}}]),n}(p.a.Component),re=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).changeAnimationDuration=function(e){a.setState({animationDuration:e.target.value,playing:!1,step:0},(function(){a.stepTime=1e3*Math.abs(a.state.animationDuration)/a.props.animationLength,clearInterval(a.animationId),a.visualizeOneStep(!1)}))},a.visualizeSimulation=function(){return a.state.playing?(clearInterval(a.animationId),void a.setState({playing:!1})):a.state.step<a.props.animationLength&&!a.neverPlayed?(a.animationId=setInterval(a.visualizeOneStep,a.stepTime),void a.setState({playing:!0})):(a.neverPlayed=!1,clearInterval(a.animationId),a.setState({playing:!1}),void a.setState({step:0},(function(){a.state.animationDuration<=0&&a.setState({animationDuration:Math.abs(a.state.animationDuration)}),a.stepTime=1e3*a.state.animationDuration/a.props.animationLength,a.animationId=setInterval(a.visualizeOneStep,a.stepTime),a.setState({playing:!0}),a.setState({})})))},a.visualizeOneStep=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a.props.simulationData;if(null!=t)if(a.state.step>a.props.animationLength)a.finishAnimation();else if(null!=a.props.colors&&0!==a.props.colors.length){for(var n=a.cy.elements("node"),i=function(){var e=t[a.state.step][r],i=a.props.colors.find((function(t){return t[0]===e}))[1];a.cy.getElementById(n[r].id()).style("background-color",i)},r=0;r<n.length;r++)i();e?a.state.step<a.props.animationLength?a.setState({step:a.state.step+1}):a.finishAnimation():a.setState({})}else console.log("no colors were given")},a.visualizeSpecificStep=function(e){var t=Number(e.target.value);t<0||t>a.props.animationLength||(clearInterval(a.animationId),a.setState({playing:!1}),a.setState({step:t},(function(){a.visualizeOneStep(!1)})))},a.cy=p.a.createRef(),a.stepTime=0,a.neverPlayed=!0,a.state={animationDuration:4,step:0,playing:!1,gif:null},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.layoutGraph(),this.setState({step:0},(function(){e.visualizeOneStep(!1)}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;e.graphData!==this.props.graphData&&(console.log("updated component => error"),this.layoutGraph(),this.setState({step:0},(function(){clearInterval(n.animationId),n.setState({playing:!1}),n.visualizeOneStep(!1)})))}},{key:"componentWillUnmount",value:function(){clearInterval(this.animationId)}},{key:"layoutGraph",value:function(){var e={name:"cose",ready:function(){},stop:function(){},animate:"end",animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};this.cy.layout(e).run()}},{key:"finishAnimation",value:function(){}},{key:"render",value:function(){var e=this,t="Play Simulation \u25b6\ufe0f";return this.state.playing&&(t="Stop Simulation \u23f9\ufe0f"),Object(z.jsxs)("div",{id:"graphDiv",children:[Object(z.jsx)("button",{id:"runSimulationButton",onClick:this.visualizeSimulation,children:t}),Object(z.jsx)(te.a,{trigger:Object(z.jsx)("button",{id:"gifGeneratorButton",children:"Generate GIF \ud83d\udcf8"}),modal:!0,children:function(t){return Object(z.jsxs)("div",{className:"modal",children:[Object(z.jsx)("button",{className:"close",onClick:function(){t()},children:"\xd7"}),Object(z.jsx)(ie,{setState:e.setState.bind(e),state:e.state,visualizeSpecificStep:e.visualizeSpecificStep,animationLength:e.props.animationLength})]})}}),Object(z.jsxs)("div",{id:"durationWrapper",children:[Object(z.jsx)("h3",{id:"durationDescription",children:"Duration (seconds): "}),Object(z.jsx)("input",{id:"animationDuration",type:"number",onChange:this.changeAnimationDuration,value:this.state.animationDuration})]}),Object(z.jsx)(F,{description:"Step",min:"0",max:this.props.animationLength,currentValue:this.state.step,handleChange:this.visualizeSpecificStep}),Object(z.jsx)(ee.a,{id:"cy",userZoomingEnabled:!1,userPanningEnabled:!1,cy:function(t){e.cy=t},elements:this.props.graphData})]})}}]),n}(p.a.Component),oe=re,se=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).cropAnimation=function(){for(var e=a.props.simulationData.data,t=e.length-1,n=e.length-1;n>0;n--)e[t]===e[n]&&(t=n);a.setState({animationLength:t})},a.recalculate=function(){a.props.normalize(),a.props.recalculateFuntion().then((function(){a.cropAnimation(),a.setState({cachedColors:a.props.colors,cachedSimulationData:a.props.simulationData,cachedGraphData:a.props.graphData})}))},a.switchView=function(){"graph"===a.state.currentView?a.setState({currentView:"chart"}):a.setState({currentView:"graph"})},a.showGraphOrChart=function(){return"graph"===a.state.currentView?Object(z.jsx)(oe,{animationLength:a.state.animationLength,graphData:a.state.cachedGraphData,normalize:a.props.normalize,colors:a.state.cachedColors,simulationData:a.state.cachedSimulationData.data}):Object(z.jsx)("div",{id:"chart",children:Object(z.jsx)(Y,{stateCounts:a.state.cachedSimulationData.stateCounts,timeSteps:a.state.cachedSimulationData.timeSteps,colors:a.state.cachedColors,animationLength:a.state.animationLength})})},a.cy=p.a.createRef(),a.stepTime=0,a.neverPlayed=!0,a.state={animationDuration:4,step:0,playing:!1,animationLength:100,cachedColors:a.props.colors,cachedSimulationData:a.props.simulationData,cachedGraphData:a.props.graphData,currentView:"graph"},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.cropAnimation(),this.setState({cachedColors:this.props.colors,cachedSimulationData:this.props.simulationData,cachedGraphData:this.props.graphData})}},{key:"render",value:function(){return Object(z.jsxs)("div",{id:"graphDiv",children:[Object(z.jsx)("button",{id:"recalculate",onClick:this.recalculate,children:"Recalculate \ud83d\udd01"}),Object(z.jsx)("button",{id:"switchView",onClick:this.switchView,children:"graph"===this.state.currentView?"Show Chart \ud83d\udcc8":"Show Graph \ud83d\udcca"}),this.showGraphOrChart()]})}}]),n}(p.a.Component),ce=function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(e){var a;Object(j.a)(this,n),(a=t.call(this,e)).horizonChange=a.horizonChange.bind(Object(g.a)(a)),a.networkChange=a.networkChange.bind(Object(g.a)(a)),a.modelChanged=a.modelChanged.bind(Object(g.a)(a)),a.recalculate=a.recalculate.bind(Object(g.a)(a)),a.networkObject=new P,a.modelObject=new U;var i=a.modelObject,r=G(a.networkObject.getGraph()),o=i.getRules(),s=i.getStates(),c=i.getDistribution(),u=N(o,s,c,a.networkObject.getGraph(),20);return a.state={rules:o,states:s,initial_distribution:c,graphData:r,horizon:20,selectedNetwork:a.networkObject,selectedModel:a.modelObject,simulationData:u},a}return Object(m.a)(n,[{key:"horizonChange",value:function(e){e.target.value>200&&(e.target.value=200),this.setState({horizon:e.target.value})}},{key:"networkChange",value:function(e){this.setState({selectedNetwork:e})}},{key:"modelChanged",value:function(e){this.setState({selectedModel:e})}},{key:"recalculate",value:function(){var e=this.state.selectedModel,t=G(this.state.selectedNetwork.getGraph()),n=e.getRules(),a=e.getStates(),i=e.getDistribution(),r=0;if(i.forEach((function(e){r+=e})),!(r<.95||r>1.05)){var o=N(n,a,i,this.state.selectedNetwork.getGraph(),this.state.horizon);return this.setState({graphData:t,rules:n,states:a,initial_distribution:i,simulationData:o}),Promise.resolve("Done")}}},{key:"render",value:function(){return Object(z.jsxs)("div",{id:"Simulation",children:[Object(z.jsxs)("div",{id:"SimulationSettings",children:[Object(z.jsx)(V,{handleChange:this.horizonChange,currentValue:this.state.horizon}),Object(z.jsx)(H,{handleChange:this.networkChange}),Object(z.jsx)(W,{handleChange:this.modelChanged})]}),Object(z.jsx)("div",{id:"SimulationGraph",children:Object(z.jsx)(se,{recalculateFuntion:this.recalculate,graphData:this.state.graphData,simulationData:this.state.simulationData,colors:this.state.selectedModel.getColors(),normalize:this.state.selectedModel.normalizeDistribution})})]})}}]),n}(p.a.Component),ue=(n(62),function(e){Object(v.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{children:"Network Epidemic Playground"}),Object(z.jsx)("h2",{children:"Continuous-time stochastic simulation of epidemic spreading on human-to-human contact networks"}),Object(z.jsxs)("h3",{id:"credits",children:["Simulation developed by ",Object(z.jsx)("a",{href:"https://mosi.uni-saarland.de/people/gerrit/",target:"_blank",rel:"noreferrer",children:"Gerrit Gro\xdfmann"}),", website developed by ",Object(z.jsx)("a",{href:"https://juliusherrmann.de",target:"_blank",rel:"noreferrer",children:"Julius Herrmann"}),". Source code on ",Object(z.jsx)("a",{href:"https://github.com/JuliusHerrmann/NetworkEpidemicPlayground",target:"_blank",rel:"noreferrer",children:"github"}),"."]})]})}}]),n}(p.a.Component)),le=ue;var he=function(){return Object(z.jsxs)("div",{className:"App",children:[Object(z.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Roboto&display=swap",rel:"stylesheet"}),Object(z.jsx)(le,{}),Object(z.jsx)(ce,{})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),r(e),o(e)}))};b.a.render(Object(z.jsx)(he,{}),document.getElementById("root")),de()}},[[63,1,2]]]);
//# sourceMappingURL=main.07d66ac7.chunk.js.map